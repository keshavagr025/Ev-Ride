<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° EV Ride - ML-Powered Green Ride Platform</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">EV Ride Platform</div>
            <div class="nav-tabs">
                <button class="tab-btn active" onclick="switchTab('user')">
                    üöó User Dashboard
                </button>
                <button class="tab-btn" onclick="switchTab('driver')">
                    üë®‚Äç‚úàÔ∏è Driver Portal
                </button>
                <button class="tab-btn" onclick="switchTab('admin')">üìä Admin Analytics</button>
            </div>
        </div>

        <!-- Alert Messages -->
        <div id="alertBox" class="alert"></div>

        <!-- USER SECTION -->
        <div id="userSection" class="section active">
            <div class="main-content">
                <!-- Map and Tracking Section -->
                <div class="card">
                    <h3>üó∫Ô∏è Live Tracking Map <span class="ml-badge">AI OPTIMIZED</span></h3>
                    <div id="map"></div>
                    
                    <!-- Ride Tracking -->
                    <div id="rideTracking" class="ride-tracking" style="display: none;">
                        <h4>üöó Active Ride - AI Optimized Route</h4>
                        <div class="tracking-info">
                            <div class="tracking-item">
                                <div class="tracking-label">Driver</div>
                                <div id="trackingDriver" class="tracking-value">-</div>
                            </div>
                            <div class="tracking-item">
                                <div class="tracking-label">ETA</div>
                                <div id="trackingETA" class="tracking-value">- mins</div>
                            </div>
                            <div class="tracking-item">
                                <div class="tracking-label">Distance</div>
                                <div id="trackingDistance" class="tracking-value">- km</div>
                            </div>
                        </div>
                        <div class="tracking-bar">
                            <div id="trackingProgress" class="tracking-progress"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 14px; color: #666; font-weight: 600;">
                            <span>üö© Pickup</span>
                            <span>üèÅ Dropoff</span>
                        </div>
                    </div>
                </div>

                <!-- Booking Section -->
                <div class="card">
                    <h2>üìç Book Your EV Ride</h2>

                    <div class="form-group">
                        <label>üö© Pickup Location</label>
                        <input
                            type="text"
                            id="pickupAddress"
                            placeholder="Enter pickup location"
                            value="Connaught Place, Delhi"
                        />
                    </div>

                    <div class="form-group">
                        <label>üèÅ Drop Location</label>
                        <input
                            type="text"
                            id="dropAddress"
                            placeholder="Enter drop location"
                            value="Karol Bagh, Delhi"
                        />
                    </div>

                    <div class="form-group">
                        <label>üöó Select EV Vehicle Type</label>
                        <div class="vehicle-grid">
                            <div class="vehicle-card selected" onclick="selectVehicle('sedan')">
                                <div class="vehicle-icon">üöó</div>
                                <div><strong>EV Sedan</strong></div>
                                <div class="vehicle-price">‚Çπ12/km ‚Ä¢ 85% Efficient</div>
                            </div>
                            <div class="vehicle-card" onclick="selectVehicle('suv')">
                                <div class="vehicle-icon">üöô</div>
                                <div><strong>EV SUV</strong></div>
                                <div class="vehicle-price">‚Çπ15/km ‚Ä¢ 80% Efficient</div>
                            </div>
                            <div class="vehicle-card" onclick="selectVehicle('hatchback')">
                                <div class="vehicle-icon">üöï</div>
                                <div><strong>EV Compact</strong></div>
                                <div class="vehicle-price">‚Çπ10/km ‚Ä¢ 90% Efficient</div>
                            </div>
                            <div class="vehicle-card" onclick="selectVehicle('premium')">
                                <div class="vehicle-icon">üèéÔ∏è</div>
                                <div><strong>EV Premium</strong></div>
                                <div class="vehicle-price">‚Çπ20/km ‚Ä¢ Luxury Ride</div>
                            </div>
                        </div>
                    </div>

                    <!-- ML-Powered Fare Breakdown -->
                    <div class="fare-display">
                        <div style="font-size: 16px; margin-bottom: 10px; font-weight: 600;">
                            üß† ML-Powered Fare Estimate
                        </div>
                        <div class="fare-amount">‚Çπ<span id="fareAmount">78.50</span></div>
                        
                        <div class="fare-breakdown">
                            <div class="breakdown-item">
                                <div class="breakdown-label">Base Fare</div>
                                <div class="breakdown-value">‚Çπ<span id="baseFare">65.00</span></div>
                            </div>
                            <div class="breakdown-item">
                                <div class="breakdown-label">Surge</div>
                                <div class="breakdown-value"><span id="surgeMultiplier">1.2</span>x</div>
                            </div>
                            <div class="breakdown-item">
                                <div class="breakdown-label">Demand</div>
                                <div class="breakdown-value"><span id="demandFactor">1.1</span>x</div>
                            </div>
                        </div>
                        
                        <div style="font-size: 14px; margin-top: 15px; opacity: 0.9; display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <div>üìè Distance: <span id="estimatedDistance">4.5</span> km</div>
                            <div>‚è±Ô∏è Time: <span id="estimatedTime">15</span> mins</div>
                        </div>
                    </div>

                    <div class="loading" id="bookingLoader">
                        <div class="spinner"></div>
                        <p>ü§ñ Finding optimal EV driver using AI matching...</p>
                    </div>

                    <button class="btn btn-primary" onclick="bookRide()" id="bookRideBtn">
                        üöÄ Book Smart EV Ride
                    </button>

                    <button class="btn btn-danger" onclick="cancelRide()" style="margin-top: 10px; display: none;" id="cancelRideBtn">
                        ‚ùå Cancel Ride
                    </button>
                </div>

                <!-- Stats and Drivers Section -->
                <div class="card">
                    <h3>üìä Real-time Platform Analytics</h3>
                    <div id="statsContainer"></div>

                    <h3 style="margin: 30px 0 20px 0;">üöó Available EV Drivers</h3>
                    <div id="driversList"></div>
                </div>
            </div>
        </div>

        <!-- DRIVER SECTION -->
        <div id="driverSection" class="section">
            <div class="card">
                <h2>üë®‚Äç‚úàÔ∏è Driver Performance Dashboard</h2>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="driverRides">0</div>
                        <div class="stat-label">Total Rides Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">‚Çπ<span id="driverEarnings">0</span></div>
                        <div class="stat-label">Total Earnings</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="driverRating">4.5</div>
                        <div class="stat-label">Average Rating ‚≠ê</div>
                    </div>
                </div>

                <h3 style="margin-bottom: 20px;">üîî Ride Requests</h3>
                <div id="pendingRidesList"></div>

                <div id="activeRideDriver" style="display: none;">
                    <h3 style="margin: 30px 0 20px 0;">üöó Active Ride</h3>
                    <div class="ride-item">
                        <div class="ride-header">
                            <div class="ride-id" id="activeRideId">RIDE_001</div>
                            <span class="status-badge status-ongoing">In Progress</span>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <div style="font-size: 15px; color: #666; margin-bottom: 8px;">
                                üìç Pickup: <span id="activePickup">Connaught Place</span>
                            </div>
                            <div style="font-size: 15px; color: #666; margin-bottom: 15px;">
                                üèÅ Drop: <span id="activeDrop">Karol Bagh</span>
                            </div>
                            <div style="font-size: 18px; font-weight: 700; color: #22c55e;">
                                üí∞ Fare: ‚Çπ<span id="activeFare">78.50</span>
                            </div>
                        </div>
                        <button class="btn btn-success" onclick="completeRide()">
                            ‚úÖ Complete Ride
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ADMIN SECTION -->
        <div id="adminSection" class="section">
            <div class="card">
                <h2>üìä Admin Analytics Dashboard <span class="ml-badge">AI INSIGHTS</span></h2>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalRides">0</div>
                        <div class="stat-label">Total Rides</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">‚Çπ<span id="totalRevenue">0</span></div>
                        <div class="stat-label">Platform Revenue</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="activeDrivers">0</div>
                        <div class="stat-label">Active Drivers</div>
                    </div>
                </div>

                <h3 style="margin: 30px 0 20px 0;">üìã Ride Management</h3>
                <div class="ride-list" id="allRidesList"></div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="app.js"></script>
</body>
</html>